{% extends "search/search.html" %}

{% block breadcrumb_content %}
  <li class="active">{{ h.nav_link(_('Datasets'), 
  	controller='ckanext.hdx_search.controllers.simple_search_controller:HDXSimpleSearchController', action='package_search', highlight_actions = 'new index') }}</li>
{% endblock %}

{% block search_form_snippet %}
	{% snippet 'search/snippets/simple_search_form.html', type='dataset', query=c.q, sorting=sorting, tab=c.tab, sorting_selected=c.sort_by_selected, 
			count=(c.count), facets=facets, show_empty=request.params, error=c.query_error, search_in_results=true, 
			placeholder=_('Search within found datasets...'), display_search_input=false, id=c.group_dict.name, other_links=c.other_links,
			indicator_counts = c.indicator_counts, dataset_counts = c.dataset_counts %}
{% endblock %}

{% block package_search_results_indicators %}
	{% if c.tab=='indicators' %}
		{#
        <div class="list-header">
            <span class="mL15 list-header-title">
              Indicators [{{c.indicator_counts}}]
            </span>
            <span class="pull-right list-header-actions">
            </span>
        </div>
        #}
        {{ h.snippet('search/snippets/indicator_list.html', query=c.q, packages=c.page.items, tab=c.tab, show_preview_on_first=False) }}
	{% endif %}
{% endblock %}

{% block package_search_results_features %}
{% endblock %}

{% block package_search_results_datasets %}
	{% if c.tab=='datasets' %}
		{{ super() }}
	{% elif c.tab=='all' %}
	
	    {# 
	    <div class="list-header">
	      <span class="mL15 list-header-title">
	        {{ _('Indicators and Datasets') }} [{{c.count}}]
	      </span>
	      <span class="pull-right list-header-actions">
	      </span>
	    </div>
	    #}
	    
	    {{ h.snippet('search/snippets/indicator_list.html', query=c.q, packages=c.page.items, show_preview_on_first=False) }}
	{% endif %}
{% endblock %}

{% block page_pagination %}
    {{ c.page.pager(q=c.q) }}
{% endblock %}
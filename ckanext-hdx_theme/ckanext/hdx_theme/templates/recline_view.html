{% extends "base.html" %}

{%- block scripts %}
{# We need to override this block to remove the insertion of Bootstrap 3 which is used in rest of ckan
   as recline needs Bootstrap 2 #}
  {% resource 'hdx_theme/google-analytics' %}
  {% resource 'hdx_theme/external-links.js' %}
{% endblock -%}

{% block page %}

  <div id="datapreview-url-div" style="display: none;">{{ h.hdx_get_ckan_config('hdx.datapreview.url') }}</div>
  <div id="previewmap-url-div" style="display: none;">{{ h.hdx_get_ckan_config('hdx.previewmap.url') }}</div>
  {% set map_config = h.get_map_config() %}
  <div data-module="recline_view"
       data-module-site_url="{{ h.dump_json(h.url('/', locale='default', qualified=true)) }}"
       data-module-resource = "{{ h.dump_json(resource_json) }}";
       data-module-resource-view = "{{ h.dump_json(resource_view_json) }}";
       data-module-map_config= "{{ h.dump_json(map_config) }}";
       >
    <h4 class="loading-dialog">
      <div class="loading-spinner"></div>
      <div class="left">{{ _('Loading...') }}</div>
    </h4>
  </div>

    {% resource 'ckanext-reclineview/vendor/jquery/1.7.1/jquery.js' %}
    {% resource 'ckanext-reclineview/vendor/underscore/1.4.4/underscore.js' %}
    {% resource 'ckanext-reclineview/vendor/backbone/1.0.0/backbone.js' %}
    {% resource 'ckanext-reclineview/vendor/mustache/0.5.0-dev/mustache.js' %}
    {% resource 'ckanext-reclineview/vendor/bootstrap/3.2.0/js/bootstrap.js' %}
    {% resource 'ckanext-reclineview/vendor/json/json2.js' %}
    {% resource 'ckanext-reclineview/vendor/flot/excanvas.js' %}
    {% resource 'ckanext-reclineview/vendor/flot/jquery.flot.js' %}
    {% resource 'ckanext-reclineview/vendor/flot/jquery.flot.time.js' %}
    {% resource 'ckanext-reclineview/vendor/leaflet/0.7.7/leaflet.js' %}
    {% resource 'ckanext-reclineview/vendor/leaflet.markercluster/leaflet.markercluster.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/jquery-ui-1.8.16.custom.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/jquery.event.drag-2.2.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/jquery.event.drop-2.2.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/slick.core.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/slick.formatters.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/slick.editors.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/slick.grid.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/plugins/slick.rowselectionmodel.js' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/plugins/slick.rowmovemanager.js' %}
    {% resource 'ckanext-reclineview/vendor/moment/2.0.0/moment.js' %}
    {% resource 'ckanext-reclineview/vendor/ckan.js/ckan.js' %}

{#    {% resource 'ckanext-reclineview/vendor/recline/recline.js' %} we use our own dataproxy #}
    {% resource 'hdx_theme/reclineview/recline.js' %}
    {% resource 'hdx_theme/base/hdx-util-lib.js' %}

    {% resource 'ckanext-reclineview/widget.recordcount.js' %}
    {% resource 'ckanext-reclineview/recline_view.js' %}


    {% resource 'ckanext-reclineview/vendor/bootstrap/3.2.0/css/bootstrap.css' %}
    {% resource 'ckanext-reclineview/vendor/leaflet/0.7.7/leaflet.css' %}
    {% resource 'ckanext-reclineview/vendor/leaflet.markercluster/MarkerCluster.css' %}
    {% resource 'ckanext-reclineview/vendor/leaflet.markercluster/MarkerCluster.Default.css' %}
    {% resource 'ckanext-reclineview/vendor/slickgrid/2.2/slick.grid.css' %}
    {% resource 'ckanext-reclineview/vendor/recline/slickgrid.css' %}
    {% resource 'ckanext-reclineview/vendor/recline/flot.css' %}
    {% resource 'ckanext-reclineview/vendor/recline/map.css' %}

    {% resource 'ckanext-reclineview/css/recline.css' %}

{% endblock %}

{% block styles %}{% endblock %}
{% block custom_styles %}{% endblock %}

{% extends "package/base.html" %}

{% set onepage = 1 %}

{% block toolbar %}
{{super()}}
{% snippet "snippets/thanks_for_contributing.html" %}
{% endblock %}

{% block primary %}

<div>
{% block primary_content %}
  <section class="module">
    <div class="module-content" id="dataset_part_1">
      <div class="package-upload-header">1. {{ _("CHOOSE COUNTRY") }}</div>
      {% block country_list %}{{super()}}{% endblock %}
      <br>
      <div class="package-upload-header">2. {{ _("TELL US SOME DETAILS ABOUT YOUR DATASET") }}</div>
      {% block form %}{{ c.form | safe }}{% endblock %}
    </div>
  </div>
  <div class="module-content" style="margin-top:0px;">
    <div class="form-actions">
      {% block cancel_button %}
        <a class="btn" href="">{% block cancel_button_text %}{{ _('Cancel') }}{% endblock %}</a>
      {% endblock %}
      <button class="btn btn-primary" id="onepage_submit" name="save">{% block save_button_text %}{{ _('Next: Add Data') }}{% endblock %}</button>
    </div>
  </div>
</section>



  {#
    <div class="module-content graybg" id="dataset_part_2">
      <div class="package-upload-header-sm">{{ _("OPTIONAL DETAILS") }}</div>
      {% block form2 %}{{ c.form | safe }}{% endblock %}
    </div>
    <div class="module-content" style="margin-top:0px;">
    <div class="form-actions">
      {% block cancel_button %}
        <a class="btn" href="">{% block cancel_button_text %}{{ _('Cancel') }}{% endblock %}</a>
      {% endblock %}
      <button class="btn btn-primary" id="onepage_submit" name="save">{% block save_button_text %}{{ _('Next: Add Data') }}{% endblock %}</button>
    </div>
  </div>
  </section>
  #}
  {#
  <section class="module inactive">
    <div class="overlay"></div>
    <div class="module-content" id="dataset_part_3">
      <div class="package-upload-header">3. {{ _("ADD FILES") }}</div>
      {% block form3 %}{{ c.form | safe }}{% endblock %}
    </div>
  </section> #}

 {% endblock %}
</div>
{% endblock %}

{% block secondary %}
  
{% endblock %}

{%- block scripts2 %}
    {{ super() }}
<!-- <script src="/base/vendor/jquery.ui.widget.js"></script>
<script src="/base/vendor/jquery-fileupload/jquery.iframe-transport.js"></script>
<script src="/base/vendor/jquery-fileupload/jquery.fileupload.js"></script>
<script src="/base/vendor/jquery-fileupload/jquery.fileupload-ui.js"></script>-->

  <script>
  $('document').ready(function(){
    //Just in case of page back
    $('option[value=-1]').attr('selected', true);

    $('#country-drop').change(function(){
      var country = $(this+'option:selected').val();
      var country_name = $(this+'option:selected').attr('display_name');
      if($('#'+country).length == 0){
        var number_of_groups = $('.group_checked').length;
        //Add country
        $('#selected_groups').append('<span class="filtered pill">'+country_name+' <input id="field-group-'+(number_of_groups)+'" type="checkbox" name="groups__'+(number_of_groups)+'__id" value="'+country+'" checked="checked" class="group_checked"/></span>');
        //Add country for real
        $('#select_groups_hidden').append('<input id="'+country+'" type="checkbox" name="groups__'+(number_of_groups)+'__id" value="'+country+'" checked="checked"/>');
      }
    });

    $('#selected_groups').on("click", ".pill", function(){
      if($(this).children('input').attr('checked') == 'checked'){
        //Uncheck hidden
        var id = $(this).children('input').val();
        $('#'+id).remove();
        $(this).remove();
      }
    });    
  });
  </script>

{% endblock -%}

